<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Pod::Advent 0.24 (Pod::Simple 3.07, Perl::Tidy 20101217) on 2011-12-03 12:17:39 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>2011 Perl Advent Calendar: WWW::Mechanize::Firefox</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../style.css" type="text/css" />
<link rel="alternate" type="text/plain" href="Firefox.pod" />
</head>
<body>
<h1><a href="../">Perl Advent Calendar 2011-12</a>-03</h1>
<h2 align="center">WWW::Mechanize::Firefox</h2>
<h3 align="center">by Fayland Lam</h3>
<p><tt><a href="http://search.cpan.org/perldoc?WWW::Mechanize::Firefox" title="WWW::Mechanize::Firefox">WWW::Mechanize::Firefox</a></tt> 是个非常强大的工具。</p>
<p>第一步是安装。安装该模块之前，需要安装一个 firefox 的 <a href="https://addons.mozilla.org/en-US/firefox/addon/mozrepl/">mozrepl</a> addon. Install 完毕后，重启然后启动 MozRepl (Tools -> MozRepl -> Start), 然后 cpan WWW::Mechanize::Firefox, 在安装的过程中，你可以看着 firefox, 你会发现它不停的打开 tab 然后做些测试，关掉 tab。如果某些 tests fail, 你可以 force install 该模块。</p>
<p>接下来做什么呢？大部分你用 firefox 加你双手能完成的任务，该模块都可以帮你自动化。</p>
<p>简单的比如登录，填写表单，提交然后解析 HTML。对比 <tt><a href="http://search.cpan.org/perldoc?WWW::Mechanize" title="WWW::Mechanize">WWW::Mechanize</a></tt>, 它可以无视 JavaScript 的阻拦。</p>
<p>复杂的如运行 JavaScript, 模拟鼠标点击，触发 JavaScript 事件，截屏，保存文件，更改 firefox 配置等等。详细的可以参阅 <tt><a href="http://search.cpan.org/perldoc?WWW::Mechanize::Firefox::Examples" title="WWW::Mechanize::Firefox::Examples">WWW::Mechanize::Firefox::Examples</a></tt></p>
<p>下面是一个非常无聊的例子。但是除了该模块，你很难用其他模块来实现它。</p>
<pre>
<span class="k">use</span> <span class="w">strict</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">warnings</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">WWW::Mechanize::Firefox</span><span class="sc">;</span>

<span class="k">my</span> <span class="i">$mech</span> = <span class="w">WWW::Mechanize::Firefox</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>

<span class="i">$mech</span><span class="i">-&gt;get</span><span class="s">(</span><span class="q">&#39;http://www.google.com/codesearch#search/&amp;q=WWW::Mechanize::Firefox&amp;type=cs&#39;</span><span class="s">)</span><span class="sc">;</span>
<span class="k">print</span> <span class="i">$_</span>-&gt;{<span class="w">innerHTML</span>} . <span class="q">&quot;\n&quot;</span> <span class="k">foreach</span> <span class="i">$mech</span><span class="i">-&gt;selector</span><span class="s">(</span><span class="q">&#39;div.GEQUXKXGJB span:first-child&#39;</span><span class="s">)</span><span class="sc">;</span>
</pre>

<p>谢谢。</p>
<div style="float: right; font-size: 10pt"><a href="Firefox.pod">View Source (POD)</a></div><br />
</body>
</html>
