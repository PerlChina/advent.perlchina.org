<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Pod::Advent 0.21 (Pod::Simple 3.13, Perl::Tidy 20090616) on 2010-12-11 05:22:57 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>2010 Perl Advent Calendar: svnnotify</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../style.css" type="text/css" />
<link rel="alternate" type="text/plain" href="svnnotify.pod" />
</head>
<body>
<h1><a href="../">Perl Advent Calendar 2010-12</a>-11</h1>
<h2 align="center">svnnotify</h2>
<h3 align="center">by Fayland Lam</h3>
<p>有人喜欢 git，也有人喜欢 svn。口味不同而已。虽然 git 很棒，但是 svn 也是很不错的。</p>
<p>我个人有个特殊的喜好，喜欢跟踪每个 commit 的变化。看看 code 最近加了啥，是不是有些变动我可以借鉴一下。这在跟踪某个项目的进程时非常管用。比如你是项目的主管，比如你想将所有的变动发送到一个 mailing list 中，我们都可以用 <tt><a href="http://search.cpan.org/perldoc?svnnotify">svnnotify</a></tt> 来满足这些需求。</p>
<p>首先你需要找到您的 svn 的 hooks 目录位置，请参阅免费的 <a href="http://svnbook.red-bean.com/index.zh.html">svn book</a></p>
<p>svn 的 hooks 是个很不错的功能。这里我们可以通过在 <span style="font-weight: bold">post-commit</span> 里简单的增加一行来达到我们的目的。</p>
<pre><span class="c">/usr/bin/svnnotify --repos-path "$REPOS" --revision "$REV" --to fayland@gmail.com -f svn@example.com -P "[code-commit] rev %d - " -s /usr/sbin/sendmail -l /usr/bin/svnlook -d</span></pre>
<p>当然在此之前您需要安装 <tt><a href="http://search.cpan.org/perldoc?SVN::Notify">SVN::Notify</a></tt> 模块。更多的参数请参阅 <a href="http://search.cpan.org/dist/SVN-Notify/bin/svnnotify">http://search.cpan.org/dist/SVN-Notify/bin/svnnotify</a></p>
<p>另外一个不错的扩展功能是 <tt><a href="http://search.cpan.org/perldoc?SVN::Notify::Mirror">SVN::Notify::Mirror</a></tt>, 可以通过该模块来做一个 svn 镜像（比如您需要有人 ci 的同时来 update 某个本地目录等）。</p>
<p>更多的可以通过搜索 CPAN 来找到：<a href="http://search.cpan.org/search?query=SVN%3A%3ANotify&mode=all">http://search.cpan.org/search?query=SVN%3A%3ANotify&mode=all</a></p>
<p>Enjoy.</p>
<div style="float: right; font-size: 10pt"><a href="svnnotify.pod">View Source (POD)</a></div><br />
</body>
</html>
